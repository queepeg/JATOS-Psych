<!doctype html>
<html>
  <head>
    <title>AST</title>
      <script src="/assets/javascripts/jatos.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
      <script src="/study_assets/AST/jspsych-5.0.3/jspsych.js"></script>
	  <script src="/study_assets/AST/jspsych-5.0.3/plugins/jspsych-text.js"></script>
      <script src="/study_assets/AST/jspsych-5.0.3/plugins/jspsych-instructions.js"></script>
      <script src="/study_assets/AST/jspsych-5.0.3/plugins/jspsych-survey-text.js"></script>
	  <script src="/study_assets/AST/jspsych-5.0.3/plugins/jspsych-single-stim.js"></script>
      <script src="/study_assets/AST/jspsych-5.0.3/plugins/jspsych-multi-stim-multi-response.js"></script>
	  <link href="/study_assets/AST/jspsych-5.0.3/css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body>
  <script>

  /* create the experiment timeline */
  var timeline = [];

//randomly order cues
  var cueArray = ["/study_assets/AST/img/emotion.png","/study_assets/AST/img/gender.png","/study_assets/AST/img/color.png",]
  var cueOrder = jsPsych.randomization.shuffle(cueArray);
      console.log("cueA =" + cueOrder[0]);
      console.log("cueB =" + cueOrder[1]);
      console.log("cueC =" + cueOrder[2]);

//define probe array
  var probeArray = ["/study_assets/AST/img/1.png","/study_assets/AST/img/2.png","/study_assets/AST/img/3.png","/study_assets/AST/img/4.png","/study_assets/AST/img/5.png","/study_assets/AST/img/6.png","/study_assets/AST/img/7.png","/study_assets/AST/img/8.png","/study_assets/AST/img/9.png","/study_assets/AST/img/10.png","/study_assets/AST/img/11.png","/study_assets/AST/img/12.png","/study_assets/AST/img/13.png","/study_assets/AST/img/14.png","/study_assets/AST/img/15.png","/study_assets/AST/img/16.png","/study_assets/AST/img/17.png","/study_assets/AST/img/18.png","/study_assets/AST/img/19.png","/study_assets/AST/img/20.png","/study_assets/AST/img/21.png","/study_assets/AST/img/22.png","/study_assets/AST/img/23.png","/study_assets/AST/img/24.png","/study_assets/AST/img/25.png","/study_assets/AST/img/26.png","/study_assets/AST/img/27.png","/study_assets/AST/img/28.png","/study_assets/AST/img/29.png","/study_assets/AST/img/30.png","/study_assets/AST/img/31.png","/study_assets/AST/img/32.png","/study_assets/AST/img/33.png","/study_assets/AST/img/34.png","/study_assets/AST/img/35.png","/study_assets/AST/img/36.png","/study_assets/AST/img/37.png","/study_assets/AST/img/38.png","/study_assets/AST/img/39.png","/study_assets/AST/img/40.png","/study_assets/AST/img/41.png","/study_assets/AST/img/42.png","/study_assets/AST/img/43.png","/study_assets/AST/img/44.png","/study_assets/AST/img/45.png","/study_assets/AST/img/46.png","/study_assets/AST/img/47.png","/study_assets/AST/img/48.png",];

  //present stimuli
  var practiceTrial = {
      type: 'multi-stim-multi-response',
      choices: [[81,90,80,77]],
      timing_stim: [500,-1],
      timing_response: [500,-1],
      response_ends_trial: [false,true],
      timeline: [
          {stimuli: [function () {
                var cue = cueOrder[0];
                return cue;},
            function () {
                var probeChoice = jsPsych.randomization.sample(probeArray, 1, false);
                return probeChoice;}]
          },
          {stimuli: [function () {
                var cue = cueOrder[0];
                return cue;},
            function () {
                var probeChoice = jsPsych.randomization.sample(probeArray, 1, false);
                return probeChoice;}]
          },
          {stimuli: [function () {
                var cue = cueOrder[0];
                return cue;},
            function () {
                var probeChoice = jsPsych.randomization.sample(probeArray, 1, false);
                return probeChoice;}]
          },
          {stimuli: [function () {
                var cue = cueOrder[1];
                return cue;},
            function () {
                var probeChoice = jsPsych.randomization.sample(probeArray, 1, false);
                return probeChoice;}]
          },
          {stimuli: [function () {
                var cue = cueOrder[0];
                return cue;},
            function () {
                var probeChoice = jsPsych.randomization.sample(probeArray, 1, false);
                return probeChoice;}]
          },
          {stimuli: [function () {
                var cue = cueOrder[2];
                return cue;},
            function () {
                var probeChoice = jsPsych.randomization.sample(probeArray, 1, false);
                return probeChoice;}]
          },
      ]

  };

      timeline.push(practiceTrial);

var endPractice = {
    type: 'instructions',
    pages: ["<p>You have completed the practice rounds.  We will now begin the full training session.</p>" +
    "<p>Click the button below to begin</p>"
    ],
    allow_keys: false,
    show_clickable_nav: true
  }

timeline.push(endPractice);
  jatos.onLoad(function() {
    jsPsych.init({
        timeline: timeline,

        //Once it has finished send the result data back to Jatos
        on_finish: function() {

var csvString = jsPsych.data.dataAsCSV();
jatos.submitResultData(csvString, jatos.endStudy);
            /*var resultJson = JSON.stringify(jsPsych.data.getData());
            jatos.submitResultData(resultJson, jatos.startNextComponent);*/
    }
  });
})
</script>
</html>
